- provide(:title, 'Muokkaa resepti')
%h1 Muokkaa reseptiä
.row
  .span6.offset3.well.green
    = form_for @recipe do |f|
      = render 'shared/recipe_error_messages'
      %p
        = f.label :name, "Nimi"
        = f.text_field :name 
      
      %h4 Raaka-aineet:
      
      %ul.materials
        - @recipe.materials.each do |material|
          %li{:id=> "#{material.id}"}
            = hidden_field_tag "old_materials[#{material.id}]", material.id
            = link_to material.name, material
            = link_to_function "poista", "remove_list_element(#{material.id})" 
              
      %h4 Lisää nämä:
      %ul#recipe_materials
        - @added_materials.each do |material|
          %li= link_to material[0].name, material[0]
          
      %p.well  
        = select("post", "material_id", Material.all.collect {|m| [ m.name, m.id ] }, {:prompt => 'Valitse raaka-aine'})
        = button_to_function "Lisää", "add_material(event)", :class => "btn btn-mini"
      
      = f.submit "Tallenna", class: "btn btn-large btn-primary"
      
    %p
      = link_to request.env["HTTP_REFERER"] do
        %i.icon-arrow-left
        Takaisin
      |
      = link_to "Kaikki reseptit", :controller => "recipes", :action => "index", :firm_id => @firm.id
      |
      = link_to "Poista", @recipe, method: :delete, confirm: "Haluatko varmasti poistaa reseptin?"
